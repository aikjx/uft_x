# 🚀 快速修复指南

## 问题1: 菜单错乱 ✅ 已修复

### 修复内容
- ✅ 添加了 `/learning-path` 路由
- ✅ 添加了 `/relationships` 路由  
- ✅ 添加了 `/unified-field` 路由
- ✅ 添加了 404 页面路由

### 立即测试
```bash
# 重启开发服务器
pnpm dev
```

然后访问：
- http://localhost:52025/ (首页)
- http://localhost:52025/formulas (公式总览)
- http://localhost:52025/learning-path (学习路径)
- http://localhost:52025/relationships (关系网络)

---

## 问题2: 公式显示没有可视化 🔧 需要检查

### 可能的原因

#### 1. MathJax 未加载
**检查方法**:
打开浏览器控制台 (F12)，输入：
```javascript
console.log(window.MathJax)
```

**如果显示 `undefined`**:
- MathJax CDN 可能被屏蔽
- 需要检查网络连接

**解决方案**:
```html
<!-- 在 index.html 中确认这两行存在 -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
```

#### 2. 公式格式问题
**检查方法**:
查看公式是否包含正确的分隔符：
- 内联公式: `\\(...\\)` 或 `$...$`
- 块级公式: `\\[...\\]` 或 `$$...$$`

**MathFormula 组件会自动处理**，但如果手动编写公式，需要注意格式。

#### 3. 组件渲染问题
**检查方法**:
打开浏览器控制台，查看是否有错误信息。

**常见错误**:
- `MathJax is not defined` - MathJax 未加载
- `Cannot read property 'typesetPromise'` - MathJax 版本问题

---

## 🔍 调试步骤

### 步骤1: 检查 MathJax 加载
```javascript
// 在浏览器控制台执行
console.log('MathJax:', window.MathJax)
console.log('MathJax version:', window.MathJax?.version)
```

**预期输出**: 应该看到 MathJax 对象和版本号

### 步骤2: 检查公式元素
```javascript
// 在浏览器控制台执行
document.querySelectorAll('.math-formula').forEach(el => {
  console.log('Formula element:', el)
  console.log('Content:', el.textContent)
})
```

**预期输出**: 应该看到公式元素和内容

### 步骤3: 手动触发渲染
```javascript
// 在浏览器控制台执行
if (window.MathJax && window.MathJax.typesetPromise) {
  window.MathJax.typesetPromise().then(() => {
    console.log('MathJax 渲染完成')
  })
}
```

**预期输出**: 公式应该被渲染

---

## 🛠️ 快速修复方案

### 方案1: 清除缓存
```bash
# 1. 停止开发服务器 (Ctrl+C)
# 2. 清除缓存
rm -rf node_modules/.vite
# 3. 重启
pnpm dev
```

### 方案2: 硬刷新浏览器
- Windows: `Ctrl + Shift + R`
- Mac: `Cmd + Shift + R`

### 方案3: 检查网络
```bash
# 测试 MathJax CDN 是否可访问
curl -I https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js
```

**如果无法访问**，可以使用备用 CDN：
```html
<!-- 备用 CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-svg.js"></script>
```

---

## ✅ 验证修复

### 1. 菜单测试
- [ ] 点击"首页"链接
- [ ] 点击"公式总览"链接
- [ ] 点击"测试公式"链接
- [ ] 点击"关于"链接
- [ ] 所有链接都能正常跳转

### 2. 公式渲染测试
- [ ] 访问 `/formulas` 页面
- [ ] 公式显示为数学符号（不是纯文本）
- [ ] 向量符号显示正确（箭头在字母上方）
- [ ] 公式可以点击查看详情

### 3. 交互测试
- [ ] 点击公式卡片
- [ ] 模态框正常弹出
- [ ] 公式详情正确显示
- [ ] 关闭按钮正常工作

---

## 📞 如果问题仍然存在

### 收集信息
1. 浏览器控制台截图
2. 网络面板截图 (F12 -> Network)
3. 公式显示截图

### 检查清单
- [ ] Node.js 版本 >= 18
- [ ] pnpm 版本 >= 8
- [ ] 网络连接正常
- [ ] 浏览器支持 ES6+
- [ ] 没有广告拦截器干扰

### 临时解决方案
如果 MathJax CDN 无法访问，可以：
1. 使用本地 MathJax
2. 使用备用 CDN
3. 使用 KaTeX 替代

---

## 🎯 预期效果

### 菜单
```
首页 | 公式总览 | 测试公式 | 关于
  ↓       ↓         ↓       ↓
  ✅      ✅        ✅      ✅
```

### 公式显示
```
优化前: vec{r}(t) = vec{C}t
优化后: r⃗(t) = C⃗t  (带箭头的向量符号)
```

---

**立即执行**: `pnpm dev` 然后测试！🚀
